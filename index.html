<!DOCTYPE html>
<html lang="ca">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Creativa DADES</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
</head>

<body>
  <header class="glass">
    <div class="header-content">
      <img src="logo.png" alt="La Creativa Logo" class="header-logo">
      <h1>La Creativa DADES</h1>
    </div>
    <nav>
      <button class="nav-btn" onclick="showSection('form')">Nova Factura</button>
      <button class="nav-btn" onclick="showSection('clients')">Clients</button>
      <button class="nav-btn" onclick="showSection('invoices')">Factures</button>
    </nav>
  </header>

  <main class="container">
    <!-- Formulari de Factura -->
    <section id="form-section" class="card glass">
      <h2>Generar Factura</h2>
      <form id="invoice-form">
        <label for="document-type">Tipus de document:</label>
        <select id="document-type" name="document-type" required>
          <option value="Comanda" selected>Comanda</option>
          <option value="Pressupost">Pressupost</option>
        </select>

        <div class="client-row">
          <div class="field-group">
            <label for="client">Client:</label>
            <input type="text" id="client" name="client" required />
          </div>
          <div class="field-group">
            <label for="dni">NIF/DNI:</label>
            <input type="text" id="dni" name="dni" />
          </div>
        </div>

        <div class="contact-row">
          <div class="field-group">
            <label for="phone">Telèfon:</label>
            <input type="tel" id="phone" name="phone" required />
          </div>
          <div class="field-group">
            <label for="email">Correu electrònic del Client:</label>
            <input type="email" id="email" name="email" />
          </div>
        </div>

        <div class="address-full-row">
          <div class="field-group">
            <label for="address">Adreça:</label>
            <input type="text" id="address" name="address" />
          </div>
          <div class="field-group">
            <label for="city">Població:</label>
            <input type="text" id="city" name="city" />
          </div>
          <div class="field-group">
            <label for="postal-code">Codi Postal:</label>
            <input type="text" id="postal-code" name="postal-code" />
          </div>
        </div>
        <div class="checkbox-container">
          <input type="checkbox" id="apply-iva" name="apply-iva" />
          <label for="apply-iva" class="checkbox-label">Aplicar IVA (21%)</label>
        </div>

        <h3>Productes</h3>
        <div id="products-container">
          <div class="product-item" data-product="1">
            <h4>Producte 1</h4>
            <div class="product-fields">
              <div class="field-group">
                <label for="product-1-name">Nom del producte:</label>
                <input type="text" id="product-1-name" name="product-1-name" required />
              </div>
              <div class="field-group">
                <label for="product-1-price">Preu unitari (€):</label>
                <input type="number" step="0.01" id="product-1-price" name="product-1-price" required />
              </div>
              <div class="field-group">
                <label for="product-1-quantity">Quantitat:</label>
                <input type="number" step="1" id="product-1-quantity" name="product-1-quantity" value="1" required />
              </div>
            </div>
          </div>
        </div>

        <div class="checkbox-container" id="add-product-container">
          <input type="checkbox" id="add-product-2" />
          <label for="add-product-2" class="checkbox-label">Afegir Producte 2</label>
        </div>

        <div class="payment-row">
          <div class="field-group">
            <label for="payment-method">Mètode de pagament:</label>
            <select id="payment-method" name="payment-method">
              <option value="" selected>--</option>
              <option value="Efectiu">Efectiu</option>
              <option value="Targeta">Targeta</option>
              <option value="Transferència">Transferència</option>
              <option value="Bizum">Bizum</option>
            </select>
          </div>
          <div class="field-group">
            <label for="paid-status">Pagat:</label>
            <select id="paid-status" name="paid-status">
              <option value="" selected>--</option>
              <option value="No">No</option>
              <option value="Sí">Sí</option>
            </select>
          </div>
        </div>




        <label for="delivery-date">Data d'entrega (Opcional):</label>
        <input type="date" id="delivery-date" name="delivery-date" />

        <div class="total-display">
          <strong>Total: <span id="total-amount">0.00</span> €</strong>
        </div>

        <button type="submit" class="btn">Generar i Enviar Factura</button>
      </form>
      <div id="status" class="status"></div>
    </section>

    <!-- Clients Section -->
    <section id="clients-section" class="card glass" style="display:none;">
      <h2>Gestió de Clients</h2>
      <div class="search-container">
        <input type="text" id="client-search" placeholder="Buscar per nom, telèfon, correu o DNI..." />
      </div>
      <div id="clients-table-container"></div>
    </section>

    <!-- Factures Section -->
    <section id="invoices-section" class="card glass" style="display:none;">
      <h2>Totes les Factures</h2>
      <div class="filter-container">
        <div class="field-group">
          <label for="filter-client-search">Buscar client:</label>
          <input type="text" id="filter-client-search" placeholder="Nom, telèfon, correu o DNI..." />
        </div>
        <div class="field-group">
          <label for="filter-document-number">Número de document:</label>
          <input type="text" id="filter-document-number" placeholder="C0001, P0001..." />
        </div>
        <div class="field-group">
          <label for="filter-start-date">Data d'entrada:</label>
          <input type="date" id="filter-start-date" />
        </div>
        <div class="field-group">
          <label for="filter-end-date">Data d'entrega:</label>
          <input type="date" id="filter-end-date" />
        </div>
        <div class="field-group">
          <label for="filter-paid-status">Estat de pagament:</label>
          <select id="filter-paid-status">
            <option value="">Tots</option>
            <option value="Sí">Sí</option>
            <option value="No">No</option>
          </select>
        </div>
        <button class="btn-filter" onclick="filterInvoices()">Filtrar</button>
        <button class="btn-filter" onclick="clearFilters()">Esborrar filtres</button>
      </div>
      <div id="invoices-table-container"></div>
    </section>
  </main>

  <footer class="glass">
    <p>© 2025 La Creativa powered by Arpal</p>
  </footer>

  <script src="script.js"></script>
</body>

</html>